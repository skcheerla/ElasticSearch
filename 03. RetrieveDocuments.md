## How to Retrieve Documents in Elasticsearch

![Image](https://www.elastic.co/docs/deploy-manage/images/elasticsearch-reference-data_processing_flow.png?utm_source=chatgpt.com)

![Image](https://i.sstatic.net/BYWHi.png?utm_source=chatgpt.com)

![Image](https://miro.medium.com/v2/resize%3Afit%3A1200/0%2ARUDR0CMuWR0HZKKy.jpg?utm_source=chatgpt.com)

![Image](https://us1.discourse-cdn.com/elastic/original/3X/9/4/9437328b8d62d930fa5a2c360cc38ac62762609c.jpeg?utm_source=chatgpt.com)

Elasticsearch provides **multiple ways to retrieve documents**, depending on whether you know the document ID or want to search/filter data.

---

## 1ï¸âƒ£ Retrieve a Document by ID (Fastest)

Use this when you know the `_id`.

```http
GET my_index/_doc/1
```

### Response

```json
{
  "_index": "my_index",
  "_id": "1",
  "_source": {
    "name": "Ravi",
    "role": "SRE",
    "experience": 12
  }
}
```

âœ” Uses direct lookup (O(1))
âœ” No search involved

---

## 2ï¸âƒ£ Retrieve All Documents (Match All)

```http
GET my_index/_search
{
  "query": {
    "match_all": {}
  }
}
```

âš ï¸ Not recommended for large indexes without pagination.

---

## 3ï¸âƒ£ Retrieve Documents Using Match Query (Full-Text Search)

```http
GET my_index/_search
{
  "query": {
    "match": {
      "role": "engineer"
    }
  }
}
```

âœ” Analyzed text search
âœ” Tokenized, relevance-scored

---

## 4ï¸âƒ£ Retrieve Exact Matches Using Term Query

```http
GET my_index/_search
{
  "query": {
    "term": {
      "role.keyword": "SRE"
    }
  }
}
```

âœ” Exact value match
âœ” Use `.keyword` fields

---

## 5ï¸âƒ£ Retrieve Documents Using Multiple Conditions (Bool Query)

```http
GET my_index/_search
{
  "query": {
    "bool": {
      "must": [
        { "match": { "role": "engineer" } }
      ],
      "filter": [
        { "range": { "experience": { "gte": 10 } } }
      ]
    }
  }
}
```

âœ” `must` â†’ scoring
âœ” `filter` â†’ fast, cached, no scoring

---

## 6ï¸âƒ£ Retrieve Selected Fields Only (_source filtering)

```http
GET my_index/_search
{
  "_source": ["name", "role"],
  "query": {
    "match_all": {}
  }
}
```

âœ” Reduces network payload
âœ” Improves performance

---

## 7ï¸âƒ£ Pagination (from / size)

```http
GET my_index/_search
{
  "from": 0,
  "size": 10,
  "query": {
    "match_all": {}
  }
}
```

âš ï¸ Avoid deep pagination (`from > 10,000`).

---

## 8ï¸âƒ£ Deep Pagination Using Search After (Best Practice)

```http
GET my_index/_search
{
  "size": 10,
  "sort": [
    { "created_at": "asc" },
    { "_id": "asc" }
  ],
  "search_after": ["2025-01-01T10:00:00", "1"]
}
```

âœ” Scales well
âœ” Used in production APIs

---

## 9ï¸âƒ£ Retrieve Documents Using Scroll (Large Exports)

```http
GET my_index/_search?scroll=1m
{
  "size": 100,
  "query": {
    "match_all": {}
  }
}
```

âœ” Used for batch processing
âŒ Not for real-time user queries

---

## ğŸ”Ÿ Count Documents Only

```http
GET my_index/_count
```

---

## ğŸ§  Common Retrieval Mistakes

| Mistake                        | Fix                  |
| ------------------------------ | -------------------- |
| Using `term` on text fields    | Use `match`          |
| Deep pagination with `from`    | Use `search_after`   |
| Returning full `_source`       | Use source filtering |
| Sorting without keyword fields | Use `.keyword`       |

---

## ğŸ¯ Interview-Ready Answer

> *â€œDocuments in Elasticsearch are retrieved either by ID using the Get API or by queries using the Search API. For performance, we use filters, source filtering, and search_after for deep pagination.â€*

---

## ğŸš€ Want to Go Deeper?

I can explain next:

* Query vs Filter context
* Scoring & relevance
* Aggregations (group by)
* Real production search optimizations
* Elasticsearch retrieval issues & fixes

Just tell me ğŸ‘
